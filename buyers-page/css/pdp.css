/* =======================
   Product Detail Page CSS
   ======================= */

html, body { background:#fff; color:#0f1111; }

/* Wider desktop view */
.pdp-wrap {
  max-width: min(98vw, 1760px);
  margin: 10px auto;
  padding: 0 8px;
}

/* 2 columns: left content + right gadget */
:root{
  --bb-scale: .70;                          /* (initial; overridden at end) */
  --bb-col: clamp(260px, 18vw, 360px);      /* (initial; overridden at end) */
}
.pdp-grid{
  display: grid;
  grid-template-columns: minmax(0, 1fr) var(--bb-col);
  gap: 12px;
  align-items: start;
}

/* Left splits: gallery + body (body narrower so image has room) */
.pdp-leftgrid{
  display: grid;
  grid-template-columns: 74% 26%;
  gap: 6px !important;                      /* tighter so body sits closer to main image */
  align-items: start;
}

/* =======================
   GALLERY (thumbs + main)
   ======================= */

/* Thumb column exactly matches 44px thumbs + 1px border each side */
.pdp-gallery{
  display: grid;
  grid-template-columns: 46px 1fr !important;
  column-gap: 0 !important;
  gap: 0 !important;
}
.pdp-gallery > *{ margin:0 !important; }

.pdp-thumbs{
  width: 46px !important;
  display: flex;
  flex-direction: column;
  gap: 4px;
  max-height: 560px;
  overflow: auto;
}

.thumb{
  width: 44px;
  height: 44px;
  border: 1px solid #ddd;
  border-radius: 6px;
  background: #f8f8f8 center/cover no-repeat;
  cursor: pointer;
  position: relative;
}
.thumb.is-video::after{
  content: "play_circle";
  font-family: "Material Symbols Outlined";
  position: absolute;
  right: 2px; bottom: 2px;
  font-size: 18px;
  background: rgba(255,255,255,.85);
  border-radius: 50%;
  padding: 0 2px;
  line-height: 1;
}

/* Main media container: align LEFT so it hugs the thumbnails */
.pdp-main{
  border: none;
  border-radius: 8px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: flex-start !important;
  min-height: 620px;
  background: #fff;
}
.pdp-main img,
.pdp-main video{
  max-width: 100%;
  max-height: 620px;
  object-fit: contain;
  border-radius: 8px;
  margin-left: 0 !important;
}

/* =========
   BODY TEXT
   ========= */
.crumbs{ color:#007185; font-size:12px; margin: 2px 0 6px; }
.pdp-title{ font-size:22px; font-weight:600; line-height:1.35; margin:0 0 6px; }

.divider{ border-top:1px solid #e5e7eb; margin:12px 0; }

.price-block .line{ display:flex; gap:8px; align-items:baseline; margin:2px 0; }
.price-block .lbl { color:#565959; font-size:14px; min-width:70px; }
.price-block .val { font-size:22px; font-weight:700; color:#0f1111; }
.price-block .mrp { text-decoration:line-through; color:#565959; font-size:14px; }
.price-block .save{ color:#007600; font-weight:600; font-size:14px; }
.price-foot{ color:#565959; font-size:13px; }

.icon-row{ display:flex; gap:28px; align-items:center; padding:10px 0; }
.icon-item{ display:flex; align-items:center; gap:8px; white-space:nowrap; font-size:13px; }
.icon-item .material-symbols-outlined{ font-size:20px; color:#0f1111; }

.bullets{ margin:6px 0 10px; padding-left:18px; }
.bullets li{ margin:4px 0; }
.pdp-desc{ color:#565959; font-size:13px; white-space:pre-wrap; }

/* Ensure the body column has no extra left indent (works with or without partials) */
.pdp-leftgrid > section + section,
.pdp-leftgrid > [data-include*="pdp-body"]{
  margin-left: 0 !important;
  padding-left: 0 !important;
}
.crumbs, .pdp-title{ margin-left: 0 !important; }

/* =======
   GADGET
   ======= */
.buybox{
  border: 1px solid #d5d9d9;
  border-radius: 12px;
  padding: 12px;
  position: sticky;
  top: 10px;
  background: #fff;
  min-height: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;

  /* visually shrink on desktop; layout width still responsive */
  transform: scale(var(--bb-scale));
  transform-origin: top right;
}
.bb-price{ font-weight:700; font-size:22px; }
.bb-mrp{ text-decoration:line-through; color:#565959; margin-left:6px; font-size:13px; }
.bb-line{ font-size:13px; color:#565959; }
.bb-stock{ color:#007600; font-weight:600; }
.qty{ display:flex; gap:8px; align-items:center; margin:8px 0; }
.qty input{ width:72px; padding:6px; border:1px solid #d5d9d9; border-radius:6px; background:#fff; }
.btn{ border:1px solid #d5d9d9; background:#ffd814; border-radius:8px; padding:10px 12px; cursor:pointer; font-weight:600; width:100%; }
.btn.secondary{ background:#f0f2f2; }
.bb-row{ display:flex; align-items:center; gap:6px; font-size:13px; color:#0f1111; }
.bb-row .material-symbols-outlined{ font-size:18px; }

/* ============  RESPONSIVE  ============ */
@media (max-width:1100px){
  .pdp-grid{ grid-template-columns: 1fr; gap:14px; }
  .pdp-leftgrid{ grid-template-columns: 1fr; gap:12px !important; }
  .pdp-main{ min-height: 420px; }
  .pdp-main img, .pdp-main video{ max-height: 420px; }
  .buybox{ transform: none; }               /* full-size gadget on small screens */
}

/* ==== Pull the body column left by shrink-wrapping the gallery ==== */
:root{ --media-max-w: 900px; }          /* max width the main media may occupy */

.pdp-leftgrid{
  grid-template-columns: fit-content(calc(46px + var(--media-max-w))) 1fr !important;
  gap: 6px !important;                  /* keep a small gutter; use 0 for flush */
}
.pdp-gallery{
  width: max-content;                   /* grid takes intrinsic width only */
  max-width: calc(46px + var(--media-max-w));
}
.pdp-main{
  justify-content: flex-start !important;
  width: max-content;
}
.pdp-main img,
.pdp-main video{
  max-width: var(--media-max-w);
  width: auto;
}

/* ===== Taller gadget (desktop) ===== */
:root{
  --bb-target-vh: 85vh;                 /* tweak: 75vh, 90vh, etc. */
}
@media (min-width:1100px){
  .buybox{
    min-height: calc(var(--bb-target-vh) / var(--bb-scale));
    overflow: auto;                     /* scroll inside if content exceeds */
  }
}

/* ============================
   FINAL OVERRIDES (as asked)
   ============================ */

/* 1) Shrink the gadget to 75% of your previous size:
      previous scale .70  → new scale  .525 (0.70 × 0.75) */
:root{
  --bb-scale: .525;
}

/* 2) Keep the gadget readable: visible text ≈ 95% of original size
      (compensation math: visible = scale * (1/scale * boost) = boost) */
:root{
  --bb-text-boost: .95;                 /* 0.95 = 95% of original text size */
}
@media (min-width:1100px){
  .buybox{ --bb-comp: calc( (1 / var(--bb-scale)) * var(--bb-text-boost) ); }
  .bb-price{ font-size: calc(22px * var(--bb-comp)) !important; }
  .bb-line,
  .bb-mrp,
  .qty label,
  .qty input{ font-size: calc(13px * var(--bb-comp)) !important; }
  .btn{
    font-size: calc(14px * var(--bb-comp)) !important;
    padding: calc(10px * var(--bb-comp)) calc(12px * var(--bb-comp)) !important;
  }
  .bb-row .material-symbols-outlined{ font-size: calc(18px * var(--bb-comp)) !important; }
}

/* 3) Amazon-like card look + pill buttons */
@media (min-width:1100px){
  .buybox{
    box-shadow: 0 2px 10px rgba(15,17,17,.12);
    border-radius: 12px;
    background: #fff;
  }
  .btn{ border-radius: 999px !important; }
  .btn.secondary{ background: #f7f8f8 !important; }
}

/* 4) Width tuned so visible gadget ~280–320px on desktop
      (layout width is divided by scale at render time) */
:root{
  /* layout width ~540–620px → visible width ~ (width × 0.525) ≈ 283–326px */
  --bb-col: clamp(540px, 32vw, 620px);
}

/* =========================================
   MOBILE SCROLL FIXES (MUST BE LAST) ≤ 768px
   ========================================= */
@media (max-width: 768px){
  /* gallery must not shrink-wrap; go full width */
  .pdp-gallery{
    display:block !important;
    width:100% !important;
    max-width:100% !important;
  }

  /* turn the main into a real scroll box; height comes from JS via --pdp-frame-h */
  .pdp-main{
    display:block !important;                 
    width:100% !important;
    height:var(--pdp-frame-h, clamp(320px, 62vw, 460px)) !important;
    overflow-y:auto !important;
    overflow-x:hidden !important;
    -webkit-overflow-scrolling:touch !important;
    touch-action: pan-y !important;
    overscroll-behavior:contain !important;
    scrollbar-gutter: stable both-edges;

    background:#fff !important;
    border:1px solid #d5d9d9 !important;
    border-radius:12px !important;
    box-shadow:0 2px 10px rgba(15,17,17,.06);
  }

  /* IMPORTANT:
     Only style the direct fallback children (legacy single-image/video).
     Do NOT target all descendants, so #pdpStack img keeps its fixed frame height. */
  .pdp-main > img,
  .pdp-main > video{
    display:block !important;
    width:100% !important;
    max-width:100% !important;
    height:auto !important;
    max-height:none !important;
    object-fit:contain !important;
  }

  /* Stacked scroller items keep a fixed frame height set via the CSS var */
  #pdpStack{ display:block !important; margin:0 !important; padding:0 !important; }
  #pdpStack img{
    display:block !important;
    width:100% !important;
    height:var(--pdp-frame-h, auto) !important;
    max-width:100% !important;
    max-height:none !important;
    object-fit:contain !important;
    object-position:center center !important;
    margin:0 auto !important;
    user-select:none !important;
    -webkit-user-drag:none !important;
    touch-action:pan-y !important;
    pointer-events:auto !important;
  }

  /* keep video hidden unless explicitly needed */
  .pdp-main > video{ display:none !important; }
}
